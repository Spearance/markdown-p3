@USE
../lib/markdown.p

@auto[]
$file[^file::load[text;test.md]]
$example[^file::load[text;example.p]]

@main[]
<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Демо Markdown для Parser 3</title>
	<meta name="description" content="демонстрация работы класса">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/default.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/parser3.min.js"></script>
	<style>
		body {
			font-family: 'PT Sans','Arial',sans-serif;
			font-size: 120%;
			margin: 3em;
		}
		article {
			width: 100%;
			display: flex;
			flex-direction: row;
			justify-content: space-between;
		}
		section {
			width: calc(50% - 20px);
			padding: 2em;
			border: 1px solid #EEEEEE;
			overflow-x: scroll;
		}
		section h1 {
			font-size: 170%;
		}
		img {
			min-width: 100px;
			max-width: 500px;
		}
		code {
			background-color: #EEEEEE;
			border-radius: 4px;
			padding: 0.2em;
		}
		blockquote {
			border-left: 3px solid #BBBBBB;
			padding: 1em 0.5em;
		}
		.pre {
			font-family: Menlo, Monaco, Consolas, "Courier New", monospace;
			white-space: pre;
		}
		table {
			width: 100%;
			border-collapse: collapse;
			margin: 0.5em 0;
		}

		td, th {
			border: 1px solid grey;
		}

		th {
			font-weight: bold;
			font-size: 80%;
		}
	</style>
</head>
<body>
	<h1>Демо Markdown для Parser 3</h1>
	
	<p>Преобразует Markdown разметку в HTML. Подробнее на <a href="https://github.com/spearance/markdown-p3">GitHub</a></p>

	<pre><code class="language-parser3">^untaint{$example.text}</code></pre>

	<h2>Пример преобразования</h2>
	<article>

		<section>
			<h3>Исходник</h3>
			
			<div class="pre">^untaint[html]{$file.text}</div>
		</section>

		<section>
			<h3>Результат</h3>

			$markdown[^markdown::create[
				$.emoji(1)
				$.highlight(1)
				$.links[
					$.path[//$env:SERVER_NAME]
					$.target[_blank]
					$.rel[external]
				]
			]]
			^markdown.parse[^untaint{$file.text}]
		</section>

	</article>

	<p>При разработке использованы материалы <a href="https://www.markdownguide.org">markdownguide.org</a>

	<script>hljs.highlightAll();</script>
</body>
</html>
